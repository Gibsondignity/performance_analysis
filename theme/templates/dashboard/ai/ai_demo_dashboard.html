{% extends 'base.html' %}
{% load static %}

{% block title %}AI Features Demonstration{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 text-white">
    <div class="container mx-auto px-6 py-16">
        <div class="text-center">
            <h1 class="text-5xl font-bold mb-4">
                <i class="fas fa-robot mr-4"></i>
                AI-Powered Performance Analytics
            </h1>
            <p class="text-xl text-blue-100 mb-8 max-w-3xl mx-auto">
                Experience cutting-edge AI technology in employee performance management.
                This demonstration showcases advanced sentiment analysis, predictive modeling,
                and intelligent recommendation systems.
            </p>
            <div class="flex justify-center space-x-4">
                <div class="bg-white bg-opacity-20 px-4 py-2 rounded-full">
                    <i class="fas fa-brain mr-2"></i>
                    <span>Hugging Face AI</span>
                </div>
                <div class="bg-white bg-opacity-20 px-4 py-2 rounded-full">
                    <i class="fas fa-chart-line mr-2"></i>
                    <span>Machine Learning</span>
                </div>
                <div class="bg-white bg-opacity-20 px-4 py-2 rounded-full">
                    <i class="fas fa-language mr-2"></i>
                    <span>NLP Processing</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mx-auto px-6 py-12">
    {% if demo_data %}

    <!-- Employee Context -->
    <div class="bg-white rounded-2xl shadow-xl p-8 mb-8 border border-gray-200">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-6">
                <img class="h-20 w-20 rounded-full border-4 border-blue-200"
                     src="https://ui-avatars.com/api/?name={{ demo_data.employee.first_name }}&background=3b82f6&color=fff&size=80"
                     alt="Employee Avatar">
                <div>
                    <h2 class="text-2xl font-bold text-gray-900">{{ demo_data.employee.first_name }} {{ demo_data.employee.last_name }}</h2>
                    <p class="text-gray-600">{{ demo_data.employee.job_title }} • {{ demo_data.employee.department }}</p>
                    <p class="text-sm text-gray-500">Performance Score: <span class="font-semibold text-blue-600">{{ demo_data.analysis.performance_score|default:'--' }}%</span></p>
                </div>
            </div>
            <div class="text-right">
                <div class="text-sm text-gray-500 mb-1">AI Analysis Complete</div>
                <div class="flex items-center text-green-600">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span class="font-semibold">Real-time Processing</span>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Features Showcase -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">

        <!-- Sentiment Analysis Demo -->
        <div class="bg-gradient-to-br from-pink-50 to-rose-50 rounded-2xl p-8 border border-pink-200">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-900">
                    <i class="fas fa-heart text-pink-600 mr-3"></i>
                    Sentiment Analysis
                </h3>
                <div class="bg-pink-100 px-3 py-1 rounded-full">
                    <span class="text-sm font-medium text-pink-700">Hugging Face AI</span>
                </div>
            </div>

            {% if demo_data.analysis.sentiment_analysis.overall_summary %}
                <div class="mb-6">
                    <div class="text-center mb-4">
                        <div class="text-4xl font-bold text-pink-600 mb-2 capitalize">
                            {{ demo_data.analysis.sentiment_analysis.overall_summary.average_sentiment }}
                        </div>
                        <p class="text-gray-600">Overall Feedback Sentiment</p>
                    </div>

                    <div class="grid grid-cols-3 gap-4 mb-4">
                        <div class="bg-white rounded-lg p-4 text-center border border-pink-200">
                            <div class="text-2xl font-bold text-green-600">{{ demo_data.analysis.sentiment_analysis.overall_summary.sentiment_distribution.positive|default:0 }}</div>
                            <div class="text-sm text-gray-600">Positive</div>
                        </div>
                        <div class="bg-white rounded-lg p-4 text-center border border-pink-200">
                            <div class="text-2xl font-bold text-gray-600">{{ demo_data.analysis.sentiment_analysis.overall_summary.sentiment_distribution.neutral|default:0 }}</div>
                            <div class="text-sm text-gray-600">Neutral</div>
                        </div>
                        <div class="bg-white rounded-lg p-4 text-center border border-pink-200">
                            <div class="text-2xl font-bold text-red-600">{{ demo_data.analysis.sentiment_analysis.overall_summary.sentiment_distribution.negative|default:0 }}</div>
                            <div class="text-sm text-gray-600">Negative</div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg p-4 border border-pink-200">
                        <p class="text-sm text-gray-700">
                            <strong>AI Technology:</strong> Uses RoBERTa transformer model trained on 124M+ tweets for accurate sentiment classification.
                            Processes {{ demo_data.analysis.sentiment_analysis.overall_summary.total_feedbacks }} feedback items in real-time.
                        </p>
                    </div>
                </div>
            {% else %}
                <div class="text-center py-8">
                    <i class="fas fa-heart-broken text-4xl text-gray-400 mb-4"></i>
                    <p class="text-gray-600">No feedback data available for sentiment analysis</p>
                </div>
            {% endif %}
        </div>

        <!-- AI Performance Summary -->
        <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-8 border border-indigo-200">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-900">
                    <i class="fas fa-brain text-indigo-600 mr-3"></i>
                    AI Performance Summary
                </h3>
                <div class="bg-indigo-100 px-3 py-1 rounded-full">
                    <span class="text-sm font-medium text-indigo-700">NLP Generation</span>
                </div>
            </div>

            {% if demo_data.analysis.ai_performance_summary %}
                <div class="bg-white rounded-lg p-6 border border-indigo-200 mb-4">
                    <p class="text-gray-800 leading-relaxed">{{ demo_data.analysis.ai_performance_summary }}</p>
                </div>

                <div class="bg-indigo-100 rounded-lg p-4 border border-indigo-300">
                    <p class="text-sm text-indigo-800">
                        <strong>AI Technology:</strong> Natural Language Generation using contextual analysis of performance metrics,
                        evaluation feedback, and trend patterns to create human-readable insights.
                    </p>
                </div>
            {% else %}
                <div class="text-center py-8">
                    <i class="fas fa-brain text-4xl text-gray-400 mb-4"></i>
                    <p class="text-gray-600">AI summary generation in progress...</p>
                </div>
            {% endif %}
        </div>

        <!-- Promotion Readiness Assessment -->
        <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 border border-green-200">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-900">
                    <i class="fas fa-trophy text-green-600 mr-3"></i>
                    Promotion Readiness
                </h3>
                <div class="bg-green-100 px-3 py-1 rounded-full">
                    <span class="text-sm font-medium text-green-700">Smart Assessment</span>
                </div>
            </div>

            {% if demo_data.analysis.promotion_readiness.readiness_score %}
                <div class="mb-6">
                    <div class="text-center mb-4">
                        <div class="text-5xl font-bold text-green-600 mb-2">{{ demo_data.analysis.promotion_readiness.readiness_score }}%</div>
                        <p class="text-gray-600">Promotion Readiness Score</p>
                        <div class="w-full bg-gray-200 rounded-full h-3 mt-2">
                            <div class="bg-green-600 h-3 rounded-full" style="width: {{ demo_data.analysis.promotion_readiness.readiness_score }}%"></div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg p-4 border border-green-200 mb-4">
                        <p class="text-gray-800">{{ demo_data.analysis.promotion_readiness.assessment }}</p>
                    </div>

                    <div class="bg-green-100 rounded-lg p-4 border border-green-300">
                        <p class="text-sm text-green-800">
                            <strong>AI Technology:</strong> Rule-based assessment combining performance scores,
                            consistency metrics, tenure analysis, and feedback patterns for career advancement predictions.
                        </p>
                    </div>
                </div>
            {% else %}
                <div class="text-center py-8">
                    <i class="fas fa-trophy text-4xl text-gray-400 mb-4"></i>
                    <p class="text-gray-600">Insufficient data for promotion assessment</p>
                </div>
            {% endif %}
        </div>

        <!-- Smart Recommendations -->
        <div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-8 border border-yellow-200">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-900">
                    <i class="fas fa-lightbulb text-yellow-600 mr-3"></i>
                    Smart Recommendations
                </h3>
                <div class="bg-yellow-100 px-3 py-1 rounded-full">
                    <span class="text-sm font-medium text-yellow-700">AI Engine</span>
                </div>
            </div>

            {% if demo_data.analysis.ai_recommendations %}
                <div class="space-y-4 mb-4">
                    {% for recommendation in demo_data.analysis.ai_recommendations %}
                        <div class="bg-white rounded-lg p-4 border border-yellow-200">
                            <div class="flex items-start justify-between mb-2">
                                <h4 class="font-semibold text-gray-900">{{ recommendation.title }}</h4>
                                <span class="px-2 py-1 text-xs font-medium rounded-full
                                    {% if recommendation.priority == 'CRITICAL' %}bg-red-100 text-red-800
                                    {% elif recommendation.priority == 'HIGH' %}bg-orange-100 text-orange-800
                                    {% elif recommendation.priority == 'MEDIUM' %}bg-yellow-100 text-yellow-800
                                    {% else %}bg-green-100 text-green-800{% endif %}">
                                    {{ recommendation.priority }}
                                </span>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">{{ recommendation.description }}</p>
                            <p class="text-xs text-gray-500">{{ recommendation.category|title }} • {{ recommendation.reasoning }}</p>
                        </div>
                    {% endfor %}
                </div>

                <div class="bg-yellow-100 rounded-lg p-4 border border-yellow-300">
                    <p class="text-sm text-yellow-800">
                        <strong>AI Technology:</strong> Intelligent recommendation engine using performance data,
                        role requirements, and development patterns to suggest personalized growth opportunities.
                    </p>
                </div>
            {% else %}
                <div class="text-center py-8">
                    <i class="fas fa-lightbulb text-4xl text-gray-400 mb-4"></i>
                    <p class="text-gray-600">No specific recommendations available</p>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Performance Prediction -->
    {% if demo_data.analysis.predictions %}
    <div class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-2xl p-8 mb-8 border border-blue-200">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-2xl font-bold text-gray-900">
                <i class="fas fa-chart-line text-blue-600 mr-3"></i>
                Performance Prediction
            </h3>
            <div class="bg-blue-100 px-3 py-1 rounded-full">
                <span class="text-sm font-medium text-blue-700">Machine Learning</span>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for prediction in demo_data.analysis.predictions %}
                <div class="bg-white rounded-xl p-6 border border-blue-200 text-center">
                    <div class="text-4xl font-bold text-blue-600 mb-2">{{ prediction.value }}%</div>
                    <p class="text-gray-700 mb-2">{{ prediction.description }}</p>
                    <div class="text-sm text-gray-500">Predicted Outcome</div>
                </div>
            {% endfor %}
        </div>

        <div class="mt-6 bg-blue-100 rounded-lg p-4 border border-blue-300">
            <p class="text-sm text-blue-800">
                <strong>AI Technology:</strong> Machine learning regression models trained on historical performance data
                to forecast future performance trends and identify potential growth trajectories.
            </p>
        </div>
    </div>
    {% endif %}

    {% else %}
    <!-- No Demo Data Available -->
    <div class="text-center py-16">
        <i class="fas fa-robot text-6xl text-gray-400 mb-6"></i>
        <h2 class="text-3xl font-bold text-gray-900 mb-4">AI Demo Unavailable</h2>
        <p class="text-xl text-gray-600 mb-8">No employee data available for AI analysis demonstration.</p>
        <p class="text-gray-500">Please ensure there are employees with performance records to showcase the AI features.</p>
    </div>
    {% endif %}

    <!-- Technology Stack -->
    <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-200">
        <h3 class="text-2xl font-bold text-gray-900 mb-6 text-center">
            <i class="fas fa-cogs text-gray-600 mr-3"></i>
            AI Technology Stack
        </h3>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {% for tech in ai_technologies %}
                <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200 text-center">
                    <div class="text-2xl font-bold text-gray-900 mb-2">{{ tech.name }}</div>
                    <div class="text-sm text-gray-600 mb-2">{{ tech.purpose }}</div>
                    <div class="text-xs text-gray-500">{{ tech.model }}</div>
                </div>
            {% endfor %}
        </div>

        <div class="mt-8 text-center">
            <p class="text-gray-600 max-w-4xl mx-auto">
                This AI-powered system demonstrates the integration of multiple cutting-edge technologies
                to provide comprehensive employee performance insights. Each component works together
                to deliver actionable intelligence for HR decision-making.
            </p>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
// Add any interactive elements for the demo
document.addEventListener('DOMContentLoaded', function() {
    // Highlight AI features on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.transform = 'translateY(0)';
                entry.target.style.opacity = '1';
            }
        });
    }, observerOptions);

    // Observe all AI feature cards
    document.querySelectorAll('.bg-gradient-to-br').forEach(card => {
        card.style.transform = 'translateY(20px)';
        card.style.opacity = '0';
        card.style.transition = 'all 0.6s ease-out';
        observer.observe(card);
    });
});
</script>
{% endblock %}